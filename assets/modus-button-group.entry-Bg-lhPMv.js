import{r as c,c as r,h as a,H as b,g as f}from"./index-Cr2Mr-Ck.js";const h="single",u="multiple",o="none",l="selected",g=":host{display:flex}:host slot::slotted(modus-button){display:block;margin:0;--btn-border-radius:0;--btn-border-left-width:0.0625rem;--btn-border-right-width:0}:host slot::slotted(modus-button:first-child){--btn-border-radius:0.25rem 0 0 0.25rem}:host slot::slotted(modus-button:last-child){--btn-border-radius:0 0.25rem 0.25rem 0;--btn-border-right-width:0.0625rem}:host slot::slotted(modus-button:only-child){--btn-border-radius:0.25rem}",p=g,m=class{constructor(e){c(this,e),this.buttonGroupClick=r(this,"buttonGroupClick"),this.buttonSelectionChange=r(this,"buttonSelectionChange"),this.selectedButtons=[],this.observer=null,this.ariaDisabled=void 0,this.ariaLabel=void 0,this.buttonStyle="outline",this.color="primary",this.disabled=void 0,this.selectionType=o,this.size="medium"}selectionTypeChanged(e){e===o&&(this.selectedButtons.forEach(t=>t.setActive(!1)),this.selectedButtons=[])}disabledChanged(){this.setupButtons(!0)}sizeChanged(){this.setupButtons()}componentWillLoad(){this.setupButtons()}componentDidLoad(){this.observer=new MutationObserver(this.handleMutations.bind(this)),this.observer.observe(this.host,{subtree:!0,attributes:!0,attributeFilter:[l]})}disconnectedCallback(){var e;(e=this.observer)===null||e===void 0||e.disconnect()}handleSlotChange(){this.setupButtons()}handleButtonClick(e){const t=e.target;if(this.selectionType!==o){switch(this.selectionType){case h:this.toggleSingleSelect(t);break;case u:this.toggleMultiSelect(t);break}this.buttonSelectionChange.emit(this.selectedButtons),this.buttonGroupClick.emit({button:t,isSelected:this.selectedButtons.includes(t)})}}handleMutations(e){for(const t of e)t.type==="attributes"&&t.attributeName===l&&this.setupButtons()}handleButtonSelection(e,t){t?(e.setActive(!0),this.selectedButtons.push(e)):(e.setActive(!1),this.selectedButtons.includes(e)&&(this.selectedButtons=this.selectedButtons.filter(i=>i!==e)))}setupButtons(e){customElements.whenDefined("modus-button").then(()=>{const t=this.host.querySelectorAll("modus-button");this.renderButtons(t,e)})}renderButtons(e,t){const i=this.determineButtonType();let n=!1;e.forEach(s=>{t?(s.ariaDisabled=this.ariaDisabled,s.disabled=this.disabled):(s.ariaDisabled=s.ariaDisabled||this.ariaDisabled,s.disabled=s.disabled||this.disabled),s.buttonStyle=this.buttonStyle,s.color=this.color,s.size=this.size,s.type=i;const d=s.hasAttribute(l)&&s.getAttribute(l)!=="false";this.selectionType===h?d&&!n?(this.handleButtonSelection(s,!0),n=!0):this.handleButtonSelection(s,!1):this.selectionType===u&&this.handleButtonSelection(s,d)})}determineButtonType(){return this.selectionType===o?"button":"toggle"}toggleMultiSelect(e){const t=this.selectedButtons.includes(e);e.setActive(!t),this.selectedButtons=t?this.selectedButtons.filter(i=>i!==e):[...this.selectedButtons,e]}toggleSingleSelect(e){const t=this.selectedButtons.includes(e);this.selectedButtons.forEach(i=>i.setActive(!1)),this.selectedButtons=t?[]:[e],t||e.setActive(!0)}render(){return a(b,{key:"d8b941eec339bb068a23b6aec06c5e9c49449d31","aria-label":this.ariaLabel,"aria-disabled":this.ariaDisabled?this.ariaDisabled:this.disabled?"true":void 0,role:"group"},a("slot",{key:"f593f0ffe06268419d7da12f8cb8290e7fb01269"}))}get host(){return f(this)}static get watchers(){return{selectionType:["selectionTypeChanged"],disabled:["disabledChanged"],buttonStyle:["sizeChanged"],color:["sizeChanged"],size:["sizeChanged"]}}};m.style=p;export{m as modus_button_group};
