import{r,h as t}from"./index-Cr2Mr-Ck.js";import{h as m,f as u,o as c,w as h,v as b,g as a}from"./modus-table.constants-3cf5de92-COwUi9LB.js";const f=".columns-visibility-menu{display:flex;flex-direction:column}.columns-visibility-menu .column-visibility-header{color:var(--modus-primary, #019aeb);font-size:0.875rem;font-weight:700;line-height:18px;margin:12px;margin-bottom:5px}.columns-visibility-menu .column-visibility-content{overflow:auto}.columns-visibility-menu .column-visibility-item{padding:5px 5px 5px 12px}.columns-visibility-menu .column-visibility-item:focus,.columns-visibility-menu .column-visibility-item:hover{background:var(--modus-group-item-hover-bg, #e0e1e9);outline:none}.columns-visibility-menu .column-visibility-item:last-child{margin-bottom:10px}.columns-visibility-menu .column-visibility-buttons-container{display:flex;justify-content:flex-end;margin-bottom:12px;margin-right:12px}modus-button{padding:12px 0 0 12px}",p=f,y=class{constructor(i){r(this,i),this.refItemContent=[],this.getAllLeafColumns=void 0,this.columnsVisibility=void 0,this.showDropdown=void 0,this.menuIconContainerRef=void 0,this.toggleDropdown=void 0,this.maxHeight=void 0,this.columnsVisibilityState=new Map}componentWillLoad(){this.initializeVisibilityState()}applyColumnsVisibility(){this.getAllLeafColumns().forEach(i=>{this.columnsVisibilityState.has(i.id)&&i.toggleVisibility(this.columnsVisibilityState.get(i.id))}),this.toggleDropdown(!this.showDropdown),this.menuIconContainerRef.focus()}closeDropdown(){this.columnsVisibilityState=new Map,this.toggleDropdown(!this.showDropdown),this.menuIconContainerRef.focus()}handleApplyKeyDown(i){i.key.toLowerCase()===m&&!i.shiftKey&&this.toggleDropdown(!1)}handleColumnItemKeyDown(i,e){let o;const n=(l,d)=>{this.refItemContent[l]?this.refItemContent[l].focus():n(d?l+1:l-1,d)},s=i.key.toLowerCase();s===u||s===c?this.toggleColumnVisibility(e):s===h?(o=e+1<this.refItemContent.length?e+1:this.refItemContent.length-1,n(o,!0),i.preventDefault()):s===b&&(o=e-1>=0?e-1:0,n(o,!1),i.preventDefault())}handleRefColumnItemContent(i,e,o){o||(this.refItemContent[e]=i)}initializeVisibilityState(){this.getAllLeafColumns().forEach(i=>{var e,o,n,s;const l=(o=(e=this.columnsVisibility)===null||e===void 0?void 0:e.requiredColumns)===null||o===void 0?void 0:o.includes(i.id),d=(s=(n=this.columnsVisibility)===null||n===void 0?void 0:n.hiddenColumns)===null||s===void 0?void 0:s.includes(i.id);!l&&d&&i.toggleVisibility(!1)})}toggleColumnVisibility(i){const e=this.refItemContent[i].children[0].shadowRoot.children;e[e.length-1].click()}checkIfRequiredColumn(i){var e,o;return(o=(e=this.columnsVisibility)===null||e===void 0?void 0:e.requiredColumns)===null||o===void 0?void 0:o.includes(i)}renderColumnsChecklist(){const i=(e,o)=>({key:e,tabIndex:this.checkIfRequiredColumn(e)?-1:0,ref:n=>{this.handleRefColumnItemContent(n,o,this.checkIfRequiredColumn(e))},onClick:()=>this.toggleColumnVisibility(o),onKeyDown:n=>this.handleColumnItemKeyDown(n,o)});return this.getAllLeafColumns().map((e,o)=>{var n,s;return t("div",Object.assign({},i(e.id,o),{class:"column-visibility-item"}),t("modus-checkbox",{ariaLabel:e.columnDef.header,label:e.columnDef.header,checked:e.getIsVisible(),onCheckboxClick:l=>this.columnsVisibilityState.set(e.id,l.detail),disabled:(s=(n=this.columnsVisibility)===null||n===void 0?void 0:n.requiredColumns)===null||s===void 0?void 0:s.includes(e.id),stopPropagation:!0}))})}renderCancelApplyButtons(){return t("div",{class:"column-visibility-buttons-container"},t("modus-button",{size:"small",buttonStyle:"outline",onClick:()=>this.closeDropdown()},"Cancel"),t("modus-button",{size:"small",onClick:()=>this.applyColumnsVisibility(),onKeyDown:i=>this.handleApplyKeyDown(i)},"Apply"))}render(){return t("div",{key:"d118f259333ea23891700be08eb68637fe658301",class:"columns-visibility-menu",style:{maxHeight:this.maxHeight||"60dvh"}},t("div",{key:"2d8def25cf5086b8f65c8cf38cb6da0934e5eb0c",class:"column-visibility-header"},this.columnsVisibility.title||"Columns"),t("div",{key:"f6f9b8abebaf892a53a533741ea67e01b9f8de37",class:"column-visibility-content"},this.renderColumnsChecklist()),this.renderCancelApplyButtons())}};y.style=p;const v=i=>{var e,o,n;return t("svg",{class:`icon-horizontal-ellipsis ${i.pressed?"pressed":""}`,fill:(e=i.color)!==null&&e!==void 0?e:"currentColor",height:(o=i.size)!==null&&o!==void 0?o:16,onClick:i.onClick?()=>i.onClick():null,viewBox:"0 0 24 24",width:(n=i.size)!==null&&n!==void 0?n:16},t("path",{d:"M10.59 10.59c-.78.78-.78 2.05 0 2.83s2.05.78 2.83 0 .78-2.05 0-2.83-2.05-.78-2.83 0Zm7 0c-.78.78-.78 2.05 0 2.83s2.05.78 2.83 0 .78-2.05 0-2.83-2.05-.78-2.83 0Zm-14 0c-.78.78-.78 2.05 0 2.83s2.05.78 2.83 0 .78-2.05 0-2.83-2.05-.78-2.83 0Z"}))},w='.dropdown-menu-container{display:inline-block;padding-left:12px;position:relative}.dropdown-menu-container .dropdown-menu-icon{border-radius:3px;cursor:pointer;display:flex;padding:4px}.dropdown-menu-container .dropdown-menu-icon svg{fill:var(--modus-icon-colour, #252a2e)}.dropdown-menu-container .dropdown-menu-icon:hover{background:var(--modus-group-item-hover-bg, #e0e1e9)}.dropdown-menu-container .dropdown-menu{background-color:var(--modus-group-item-bg, #fff);border:1px solid var(--modus-group-item-border-color, #e0e1e9);box-shadow:0 0 4px var(--modus-card-shadow-color, rgba(54, 53, 69, 0.3019607843));display:none;font-family:"Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";position:absolute;right:0;top:28px;width:240px;z-index:99}.dropdown-menu-container .dropdown-menu.visible{display:block}',C=w,g=class{constructor(i){r(this,i),this.context=void 0,this.show=!1}handleClickOutside(i){i.composedPath().find(o=>o.className==="dropdown-menu-container")||(this.show=!1)}handleIconKeyDown(i){const e=i.key.toLowerCase();e===u||e===c?(this.show=!0,i.preventDefault()):e===a&&(this.show=!1,i.preventDefault())}handleDropdownKeyDown(i){i.key.toLowerCase()===a&&(this.show=!1,this.menuIconContainerRef.focus(),i.preventDefault())}render(){const{tableInstance:{getAllLeafColumns:i},toolbarOptions:e,maxHeight:o}=this.context;return t("div",{key:"e028260e39853e6d9bb12954c06d0ca36b858fbe",class:"dropdown-menu-container"},t("div",{key:"f4ca8b772cd9207c5e4349e9b90a6ca270f685bf",tabIndex:0,class:"dropdown-menu-icon",onClick:()=>this.show=!this.show,onKeyDown:n=>this.handleIconKeyDown(n),ref:n=>this.menuIconContainerRef=n},t(v,{key:"ee5496caaa3a62710c2f4ce76a0006017c36d136",size:"20"})),(e==null?void 0:e.columnsVisibility)&&t("div",{onKeyDown:n=>this.handleDropdownKeyDown(n),class:`dropdown-menu ${this.show?"visible":""}`},t("modus-table-columns-visibility",{getAllLeafColumns:i,columnsVisibility:e==null?void 0:e.columnsVisibility,showDropdown:this.show,menuIconContainerRef:this.menuIconContainerRef,toggleDropdown:n=>this.show=n,maxHeight:o})))}};g.style=C;export{y as modus_table_columns_visibility,g as modus_table_dropdown_menu};
